---
title: "IPMI"
date: 2025-09-24 00:00:00  +0500
categories: [Server]
tags: [BMC]
---


### **IPMI Interview Questions for a BMC Engineer**

#### **Category 1: Foundational Concepts & Architecture**

**Question 1: What is IPMI, and what are its core components and communication channels?**

**What the interviewer is looking for:** A clear understanding of the IPMI architecture and its "out-of-band" nature.

**Sample Answer:**
"IPMI is a standardized hardware-level interface for system management that operates independently of the host's CPU, BIOS, and OS. This 'out-of-band' management allows administrators to manage a system even if it's powered off or unresponsive.

The core components are:
1.  **BMC (Baseboard Management Controller):** The heart of IPMI. It's a dedicated microcontroller on the motherboard that manages the interface.
2.  **IPMB (Intelligent Platform Management Bus):** An I2C-based bus that connects the BMC to other management controllers within the same chassis (e.g., in a blade server).
3.  **ICMB (Intelligent Chassis Management Bus):** A bridge for management across chassis.
4.  **SMBus (System Management Bus):** Used by the BMC to communicate with sensors on the motherboard.
5.  **IPMI-over-LAN:** The channel that allows remote management by encapsulating IPMI messages in RMCP (Remote Management Control Protocol) packets over UDP.

The key channels are:
*   **System Interface:** KCS (Keyboard Controller Style) or BT (Block Transfer) for communication between the host CPU and the BMC.
*   **LAN Channel:** For remote management."

---

**Question 2: Explain the key differences between IPMI and Redfish. Why is the industry shifting towards Redfish?**

**What the interviewer is looking for:** Awareness of the limitations of IPMI and the advantages of modern standards.

**Sample Answer:**
"This is a fundamental shift in management philosophy.

| Feature | IPMI | Redfish |
| :--- | :--- | :--- |
| **Protocol** | Proprietary binary protocol (RMCP/UDP) | Standard RESTful API (HTTPS/JSON) |
| **Data Model** | Flat command set, often vendor-extended | Rich, hierarchical, discoverable data model |
| **Security** | Historically weak; often clear-text passwords | Modern, based on HTTPS with strong auth |
| **Scalability** | Designed for single servers; cumbersome for large scale | Designed for large-scale data centers & composability |
| **Ease of Use** | Requires specialized tools (`ipmitool`); parsing is complex | Human-readable, easy to use with curl, Python, etc. |

The industry is shifting to Redfish because it's **modern, scalable, and secure**. IPMI's binary nature and lack of a standard data model make automation and multi-vendor interoperability difficult. Redfish's API-first design is ideal for DevOps, orchestration, and managing complex, composable infrastructure."

---

#### **Category 2: Core Operations & commands**

**Question 3: What is the IPMI command to get the sensor readings (e.g., CPU temperature) from a remote server? Break down its components.**

**What the interviewer is looking for:** Practical knowledge of the most common IPMI task.

**Sample Answer:**
"The standard command using `ipmitool` is:
```bash
ipmitool -I lanplus -H <BMC_IP> -U <username> -P <password> sdr list
```
or for a specific sensor:
```bash
ipmitool -I lanplus -H <BMC_IP> -U <username> -P <password> sensor get "CPU Temp"
```

**Breakdown:**
*   `-I lanplus`: Specifies the interface. `lanplus` is the modern version with improved security over plain `lan`.
*   `-H <BMC_IP>`: The hostname or IP address of the BMC.
*   `-U / -P`: Credentials for authentication.
*   `sdr list`: The command itself. SDR stands for **Sensor Data Repository**. This command fetches the list of all sensors and their current readings.
*   `sensor get`: Gets detailed information for a specific sensor, including thresholds, units, and status.

The SDR is a critical concept—it's a database on the BMC that holds the definitions for all sensors (their names, types, thresholds, etc.)."

---

**Question 4: How would you force a power cycle on a hung server using IPMI?**

**What the interviewer is looking for:** Knowledge of chassis power control commands.

**Sample Answer:**
"The most direct command is:
```bash
ipmitool -I lanplus -H <BMC_IP> -U <user> -P <pass> power reset
```

This performs a hardware-level reset, equivalent to pressing the reset button. Other essential power commands are:
*   `power on`: Powers on the system.
*   `power off`: Powers off the system (graceful if possible, but not forced).
*   `power cycle`: Shuts down and then powers up (with a delay). If the system is already off, this is the same as `power on`.
*   `power diag`: Initiates a soft shutdown via the OS, then powers back on.
*   **`power soft`:** Attempts a graceful (ACPI) shutdown. This is what you'd try first before a hard `reset`."

---

#### **Category 3: Internal Mechanics & Data Structures**

**Question 5: What are SDR, SEL, and FRU in the context of IPMI? What information do they store?**

**What the interviewer is looking for:** Understanding of IPMI's core data repositories.

**Sample Answer:**
"These are the three fundamental data stores in an IPMI system:

1.  **SDR (Sensor Data Repository):** This is the *definition* of all sensors. It doesn't store live values but describes each sensor: its name (e.g., "CPU Temp"), type (temperature, voltage), unit (degrees C), and critical thresholds (Lower Non-Recoverable, Critical, etc.). The `sdr list` command reads these definitions and then fetches the current value from each sensor.

2.  **SEL (System Event Log):** This is the *history* of events. It's a time-ordered log of sensor trips and discrete events. For example, if a temperature exceeds a critical threshold, an entry is made in the SEL with a timestamp, sensor ID, and event description. The command to view it is `sel list`. This is the first place to look when debugging a hardware issue.

3.  **FRU (Field Replaceable Unit) Inventory:** This stores *physical asset information*. It's a small EEPROM on replaceable components (the motherboard itself, DIMMs, PSUs, etc.) that contains data like the manufacturer, product name, part number, and serial number. The command `fru print` reads this data. This is crucial for inventory management and identifying faulty hardware."

---

**Question 6: Explain the concept of IPMI "Channels" and "Privilege Levels".**

**What the interviewer is looking for:** Knowledge of IPMI's access control model.

**Sample Answer:**
"**Channels** are the logical communication paths for IPMI. A single BMC can have multiple channels.
*   **Channel 0** is typically the system interface (KCS).
*   **Channel 1** is usually the first LAN channel.
A BMC might have multiple network interfaces, each on a different channel.

**Privilege Levels** determine what commands a user is allowed to execute. The levels, from lowest to highest, are:
*   **Callback**
*   **User**
*   **Operator** (can perform power control, etc.)
*   **Administrator** (full control, including user management)

The key point is that privilege levels are assigned to a user *on a specific channel*. A user might have 'Administrator' privileges when connecting over the dedicated management LAN (Channel 1) but only 'User' privileges when connecting over a shared LAN (Channel 2). This allows for granular security policies."

---

#### **Category 4: Debugging & Security**

**Question 7: A remote IPMI command is failing with an authentication error. What are the potential causes?**

**What the interviewer is looking for:** Systematic troubleshooting skills for a common problem.

**Sample Answer:**
"I would troubleshoot in this order:
1.  **Verify Credentials:** Double-check the username, password, and BMC IP address. A simple typo is the most common cause.
2.  **Check User Enablement:** In IPMI, user accounts can be enabled or disabled. I would need to check via another enabled account or local access.
3.  **Channel Privileges:** Confirm that the user has the required privilege level (e.g., `OPERATOR` or `ADMIN`) on the channel I'm using (e.g., `lan` channel 1).
4.  **IPMI Cipher Suites:** The `lanplus` interface uses stronger authentication (RAKP-HMAC-SHA1). A mismatch in supported cipher suites between `ipmitool` and the BMC can cause authentication to fail. I would try specifying a specific cipher suite with the `-C` option in `ipmitool` (e.g., `-C 3`).
5.  **BMC Configuration:** Ensure that IPMI-over-LAN is enabled in the BMC configuration. Sometimes it's disabled by default."

---

**Question 8: What are the known security concerns with IPMI, and how can they be mitigated?**

**What the interviewer is looking for:** Awareness of IPMI's historical weaknesses and best practices for securing it.

**Sample Answer:**
"IPMI has several well-documented security concerns:
1.  **Clear-Text Passwords:** The original `-I lan` interface often sends passwords in clear text. **Mitigation:** Always use `-I lanplus` which uses secure authentication (RAKP).
2.  **Default Credentials:** Many systems ship with well-known default usernames/passwords (e.g., `ADMIN/ADMIN`). **Mitigation:** Change default credentials immediately.
3.  **Exposed Services:** The BMC is a network-connected computer that can be attacked. **Mitigation:** Place the management network on a dedicated, firewalled VLAN. Disable IPMI-over-LAN if it's not needed.
4.  **BMC Vulnerabilities:** The BMC itself runs an OS and software that can have vulnerabilities. **Mitigation:** Apply BMC firmware updates regularly.
5.  **Privilege Escalation Bugs:** Historical vulnerabilities have allowed lower-privilege users to gain higher access. **Mitigation:** Keep firmware updated and follow the principle of least privilege for user accounts.

The overarching mitigation is to treat the management network with the same security posture as your most critical network infrastructure—isolate it, harden it, and patch it."

---

#### **Category 5: Integration with Modern Stacks**

**Question 9: How can IPMI be integrated into a modern monitoring system like Prometheus?**

**What the interviewer is looking for:** Practical knowledge of using legacy interfaces in modern automation.

**Sample Answer:**
"While IPMI is a legacy protocol, it can be integrated effectively. The standard method is to use an **exporter** pattern.

1.  **IPMI Exporter:** You would run a tool like the **Prometheus IPMI Exporter** on a dedicated monitoring host or a secure 'jump host' within the management network.
2.  **Data Collection:** The exporter uses `ipmitool` (or a Go library) to periodically poll the BMCs of all your servers. It collects metrics like power state, temperature sensor readings, fan speeds, and voltage levels.
3.  **Metric Exposition:** The exporter parses the text output of `ipmitool` and converts it into a metrics format that Prometheus understands, exposing them on an HTTP endpoint (e.g., `:9290/metrics`).
4.  **Scraping:** The Prometheus server is configured to 'scrape' this endpoint at regular intervals, storing the time-series data.
5.  **Alerting & Visualization:** You can then create alerts in Prometheus/Alermanager based on sensor thresholds and build dashboards in Grafana.

This approach encapsulates the legacy IPMI interaction and presents the data in a modern, scalable way."
