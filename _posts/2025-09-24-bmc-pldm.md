---
title: "PLDM"
date: 2025-09-24 00:00:00  +0500
categories: [Server]
tags: [BMC]
---


### **PLDM Interview Questions for a BMC Engineer**

#### **Category 1: Foundational Concepts**

**Question 1: What is PLDM, and how does it relate to MCTP and Redfish in the management stack?**

**What the interviewer is looking for:** Understanding of PLDM's role in the modern management hierarchy.

**Sample Answer:**
"PLDM is a suite of data model specifications defined by the DMTF that standardizes the semantics of management commands. It's the *what*â€”the actual instruction set for tasks like reading a sensor or updating firmware.

Its relation to other protocols is hierarchical:
*   **MCTP is the Transport (The Envelope):** MCTP carries PLDM messages as its payload. MCTP handles the routing of messages between endpoints using EIDs.
*   **PLDM is the Payload (The Letter):** It defines the specific commands and data formats for platform management.
*   **Redfish is the API (The User Interface):** A user or orchestration tool uses the Redfish REST API to request an action. The BMC's Redfish service then translates that request into one or more PLDM commands to be sent over MCTP to the actual hardware component.

So, the flow is: **Redfish API -> BMC -> PLDM Commands -> MCTP Packets -> Physical Bus (e.g., PCIe) -> Target Device.**"

---

**Question 2: Name the key PLDM base types and describe the primary function of at least three.**

**What the interviewer is looking for:** Knowledge of the scope of the PLDM specification.

**Sample Answer:**
"PLDM is organized into base types, each covering a specific management domain. The key ones are:
1.  **PLDM for Base Commands (Type 0x00):** This is the foundation. It includes commands for discovering what PLDM types and versions a endpoint supports (`GetPLDMTypes`, `GetPLDMVersion`). It's always the first step in communication.
2.  **PLDM for Platform Monitoring and Control (Type 0x02):** This is one of the most critical types. It handles sensor and effector management. It defines commands for getting sensor readings (temperature, voltage, power), setting thresholds, and controlling effectors (like resetting a device). This replaces the older IPMI Sensor Data Record (SDR) model.
3.  **PLDM for Firmware Update (Type 0x0F):** This standardizes the firmware update process for platform components (BIOS, CPLDs, GPUs, NICs). It defines the entire workflow: identifying updateable components, transferring the image, verifying it, and activating it.
4.  **PLDM for BIOS Control (Type 0x03):** Manages BIOS/UEFI configuration settings (attributes) remotely, such as boot order or security settings.
5.  **PLDM for Redfish Device Enablement (Type 0x3F):** Provides a way to map PLDM-managed devices to Redfish resource URIs, simplifying the BMC's job of exposing them via the Redfish API."

---

#### **Category 2: Technical Deep Dive**

**Question 3: Describe the standard PLDM message format. What are the key fields in the PLDM header?**

**What the interviewer is looking for:** Understanding of the protocol's packet structure.

**Sample Answer:**
"A PLDM message has a header followed by a payload. The header is crucial for interpretation:
```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+---------------+---------------+---------------+---------------+
|  Instance ID  |    Reserved   |  PLDM Type    | PLDM Command  |
+---------------+---------------+---------------+---------------+
```
*   **Instance ID (1 byte):** Used to match a request with its response. The requester sets this ID, and the responder must echo it back in the reply. This is essential for handling multiple in-flight requests.
*   **Reserved (1 byte):** Currently unused, set to `0x00`.
*   **PLDM Type (1 byte):** Specifies the base type (e.g., `0x02` for Monitoring, `0x0F` for Firmware Update).
*   **PLDM Command (1 byte):** Specifies the specific command within that base type (e.g., for Type `0x02`, command `0x11` might be `GetSensorReading`).

The payload that follows is specific to the (Type, Command) combination."

---

**Question 4: Explain the PLDM Firmware Update (FWU) process. What are the main states in the state machine?**

**What the interviewer is looking for:** Detailed knowledge of a critical and complex PLDM workflow.

**Sample Answer:**
"The PLDM FWU process is a well-defined state machine executed between a **Requestor** (the BMC) and a **Responder** (the device being updated, e.g., a NIC).

The main states are:
1.  **IDLE:** The initial state. The Responder is not performing an update.
2.  **LEARN COMPONENTS:** The Requestor queries the Responder to discover what firmware components it has and their versions.
3.  **READY:** The Requestor has identified a suitable firmware image and is ready to start the transfer.
4.  **DOWNLOAD:** This is the bulk transfer phase. The Requestor sends the firmware image in chunks using `RequestFirmwareData` commands. The Responder acknowledges each packet.
5.  **VERIFY:** After the download, the Requestor commands the Responder to verify the integrity of the received image.
6.  **APPLY:** The Requestor triggers the application of the new firmware. This often involves a reset of the component.
7.  **ACTIVATE:** The new firmware is made active. The state machine returns to IDLE.

A key point is that the Requestor drives the entire process by sending commands that cause the Responder to transition between these states. The `PassComponentTable` and `CompleteComponentUpdate` commands are also critical for handling multi-component devices."

---

#### **Category 3: Integration and Debugging**

**Question 5: How would you use PLDM to monitor the temperature of a CPU or a GPU? What specific commands are involved?**

**What the interviewer is looking for:** Practical application of the Platform Monitoring and Control type.

**Sample Answer:**
"This involves PLDM Type `0x02` (Platform Monitoring and Control).
1.  **Discovery:** First, I'd use PLDM Base commands to confirm the endpoint supports Type `0x02`.
2.  **Get Sensor PDRs:** The core concept in PLDM is the **Platform Description Repository (PDR)**. I would send a `GetPDR` command to retrieve the Sensor PDR for the temperature sensor. This PDR is a data structure that describes everything about the sensor: its ID, what it measures (e.g., temperature in degrees C), its possible states, and its scaling factors.
3.  **Get Sensor Reading:** Once I have the correct **sensor ID** from the PDR, I can periodically send a `GetSensorReading` command, passing that sensor ID. The responder would return the current raw sensor value.
4.  **Interpretation:** I would then apply the scaling and offset values from the Sensor PDR to convert the raw reading into an actual engineering value (e.g., degrees Celsius).

This PDR-based model is more structured and discoverable than the older IPMI SDR approach."

---

**Question 6: You are implementing a firmware update for a PCIe device using PLDM over MCTP, but the transfer keeps failing halfway through. How would you debug this?**

**What the interviewer is looking for:** A systematic debugging approach for a complex, multi-layered problem.

**Sample Answer:**
"I would debug this layer by layer:
1.  **Check Logs:** First, examine the BMC logs for any error messages from the PLDM FWU application or the MCTP stack. Look for specific PLDM completion codes (e.g., `INVALID_DATA` or `OUT_OF_RESOURCES`).
2.  **Validate Basic Connectivity:** Ensure the MCTP endpoint is still reachable during the failure. Can I still send it a simple PLDM Base command like `GetPLDMTypes`?
3.  **Analyze the Transfer:**
    *   **Packet Size:** Check if the `RequestFirmwareData` command is using a transfer size that exceeds the endpoint's maximum capability (obtained during the `QueryDeviceIdentifiers` command).
    *   **Timeouts:** The transfer might be too slow, causing a timeout on either the BMC or the device side. Are there retries? Is the device being starved of CPU time?
    *   **Resource Exhaustion:** The device might have a limited buffer for the incoming image. A slow transfer could cause its buffer to overflow if not managed correctly.
4.  **Use a Sniffer/Traces:** If possible, use a protocol analyzer that can capture MCTP/PLDM traffic on the PCIe bus. This is the ultimate debug tool. I could see exactly which packet fails, if acknowledgments are being sent, and what the completion codes are.
5.  **Check for Hardware Issues:** A PCIe link training error or electrical issue under load could corrupt packets, leading to the failure."

---

#### **Category 4: Advanced Concepts**

**Question 7: What are PDRs (Platform Description Repositories), and why are they fundamental to PLDM?**

**What the interviewer is looking for:** Understanding of the data-driven architecture of PLDM.

**Sample Answer:**
"PDRs are the core discovery mechanism of PLDM. Instead of having a fixed, hard-coded understanding of the platform, the BMC can dynamically discover it by reading a set of PDRs from each endpoint.

A PDR is a self-describing data record. There are different types:
*   **Sensor PDR:** Describes a sensor (its ID, type, units, etc.).
*   **Effecter PDR:** Describes a controllable element (like a reset button).
*   **Entity Association PDR:** Describes the physical or logical composition of the system (e.g., a CPU is part of a socket, which is part of the system chassis).

This is fundamental because it makes the management system **generic and scalable**. The BMC doesn't need special code for every possible device; it can read the PDRs to understand what the device is, what it can do, and how to control it. This is a huge advantage over proprietary schemes."

---

**Question 8: What is the difference between a PLDM Terminus and a PLDM Function? In a typical server, what components would act as each?**

**What the interviewer is looking for:** Knowledge of PLDM network architecture.

**Sample Answer:**
"This is about the hierarchy of PLDM capabilities:
*   **PLDM Terminus:** This is a logical endpoint that has its own EID and can originate and respond to PLDM messages. It's a full-fledged PLDM entity. Examples include the BMC itself, a NIC with management capabilities, or a GPU with a management controller.
*   **PLDM Function:** This is a software module *within* a Terminus that implements a specific PLDM type. A single Terminus can host multiple Functions. For example, the BMC (a Terminus) might host a Firmware Update Function (Type 0x0F) to update other devices, and also a Platform Monitoring Function (Type 0x02) to monitor its own internal sensors.

So, in a server:
*   **The BMC** is a PLDM Terminus with multiple Functions.
*   **A managed SSD** would be a separate PLDM Terminus (with its own EID), likely implementing a Firmware Update Function.
*   A simple temperature sensor might not be a full Terminus but might be represented by a PDR provided by a bridge chip that acts as a Terminus on its behalf."
